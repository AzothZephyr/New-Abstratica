{"remainingRequest":"/Users/aaronh/Downloads/abstratica-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aaronh/Downloads/abstratica-web/src/views/NFTDetail.vue?vue&type=style&index=0&id=1142543a&scoped=true&lang=scss&","dependencies":[{"path":"/Users/aaronh/Downloads/abstratica-web/src/views/NFTDetail.vue","mtime":1653334282000},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/css-loader/dist/cjs.js","mtime":1693191336063},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1693191336554},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/postcss-loader/src/index.js","mtime":1693191336210},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/sass-loader/dist/cjs.js","mtime":1693191335793},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/cache-loader/dist/cjs.js","mtime":1693191335836},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/vue-loader/lib/index.js","mtime":1693191336374}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICIuLi9zY3NzL2dsb2JhbC5zY3NzIjsKQGltcG9ydCAiLi4vc2Nzcy92YXJpYWJsZXMuc2NzcyI7Cgouc2tlbGV0b24taW1nIHsKICA6OnYtZGVlcCBkaXYgewogICAgaGVpZ2h0OiA1NDBweCAhaW1wb3J0YW50OwogIH0KfQouc2tlbGV0b24taW1nLXhzIHsKICA6OnYtZGVlcCBkaXYgewogICAgaGVpZ2h0OiA0MzVweCAhaW1wb3J0YW50OwogIH0KfQoubm8td29yZC1icmVhayB7CiAgd29yZC1icmVhazoga2VlcC1hbGw7Cn0KLmxpbmstY29sb3IgewogIGNvbG9yOiAjNjE2MTYxOwp9Ci5jb250YWluZXJiZyB7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCIvYmcvbWFpbi5qcGciKTsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiB0b3A7CiAgLyogYmFja2dyb3VuZC1zaXplOiAxMDAlOyAqLwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgLy8gbWF4LXdpZHRoOiAxOTAwcHg7CiAgLy8gd2lkdGg6IDEwMCU7CiAgbWluLWhlaWdodDogNjUwcHg7Cn0KLmFjY291bnQtaWQgewogIGZvbnQtc2l6ZTogMC44cmVtICFpbXBvcnRhbnQ7CiAgZm9udC13ZWlnaHQ6IDQwMCAhaW1wb3J0YW50OwogIGxpbmUtaGVpZ2h0OiAxLjI1cmVtOwogIGxldHRlci1zcGFjaW5nOiAwLjAzMzMzMzMzMzNlbSAhaW1wb3J0YW50OwogIGZvbnQtZmFtaWx5OiAiUm9ib3RvIiwgc2Fucy1zZXJpZiAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["NFTDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqYA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NFTDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-card tile>\n    <TitleParallax :text=\"name\" :height=\"150\" />\n    <template>\n      <v-card-text class=\"containerbg ma-0 pa-0 pt-2\">\n        <v-container>\n          <v-row class=\"ma-0 ma-md-2 ma-lg-2 ma-xl-2\">\n            <v-col cols=\"12\" xs=\"12\" sm=\"8\" md=\"7\" lg=\"6\" xl=\"6\">\n              <template v-if=\"loaded && !err\">\n                <v-hover>\n                  <template v-slot=\"{ hover }\">\n                    <v-card\n                      elevation=\"4\"\n                      max-height=\"540\"\n                      max-width=\"540\"\n                      class=\"ml-auto mb-4\"\n                    >\n                      <v-img\n                        :src=\"imgBase64\"\n                        :alt=\"name\"\n                        elevation=\"4\"\n                        aspect-ratio=\"1\"\n                        class=\"align-end text-right\"\n                        :gradient=\"\n                          hover\n                            ? 'to bottom, rgba(0,0,0,0) 88%, rgba(0,0,0,.6)'\n                            : ''\n                        \"\n                      >\n                        <v-card-title v-show=\"hover\" class=\"pr-2 pb-2\">\n                          <a\n                            :download=\"downloadFilename\"\n                            :href=\"imgBase64\"\n                            class=\"white--text ma-1 ml-auto no-text-decor\"\n                          >\n                            <v-icon size=\"28\" color=\"white\">\n                              mdi-download\n                            </v-icon>\n                          </a>\n                          <a\n                            :href=\"rawImgUrl\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            class=\"white--text ml-4 no-text-decor\"\n                          >\n                            <v-icon size=\"28\" color=\"yellow\">\n                              mdi-download\n                            </v-icon>\n                          </a>\n                        </v-card-title>\n                      </v-img>\n                    </v-card>\n                  </template>\n                </v-hover>\n              </template>\n              <template v-else>\n                <v-responsive\n                  class=\"mx-auto mb-4\"\n                  max-height=\"540\"\n                  max-width=\"540\"\n                  :aspect-ratio=\"1\"\n                >\n                  <v-sheet :color=\"`grey lighten-5`\">\n                    <v-skeleton-loader\n                      ref=\"previewSkeleton\"\n                      max-height=\"540\"\n                      max-width=\"540\"\n                      :class=\"[\n                        'mx-auto ma-1',\n                        $vuetify.breakpoint.mobile\n                          ? 'skeleton-img-xs'\n                          : 'skeleton-img',\n                      ]\"\n                      type=\"image\"\n                    ></v-skeleton-loader>\n                  </v-sheet>\n                </v-responsive>\n              </template>\n            </v-col>\n            <v-col cols=\"12\" xs=\"12\" sm=\"12\" md=\"5\" lg=\"5\" xl=\"5\">\n              <template v-if=\"loaded && !err\">\n                <v-card elevation=\"4\" class=\"mb-6\">\n                  <v-card-title>\n                    <v-card-text class=\"d-flex align-center text-h6 pb-0\">\n                      {{ this.name }}\n\n                      <span class=\"d-flex align-center ml-auto\">\n                        <span class=\"d-none d-sm-flex text-overline mr-2\">\n                          View on\n                        </span>\n                        <v-chip\n                          class=\"pa-2\"\n                          label\n                          small\n                          outlined\n                          link\n                          :href=\"solScanAccount(metadata)\"\n                          target=\"_blank\"\n                        >\n                          Solscan\n                        </v-chip>\n                      </span>\n                    </v-card-text>\n                    <v-card-subtitle class=\"text-caption no-word-break pb-0\">\n                      {{ this.erc.description }}\n                    </v-card-subtitle>\n                  </v-card-title>\n                  <v-divider></v-divider>\n                  <v-card-text>\n                    <!-- <h4 class=\"ma-2\">{{ this.erc.description }}</h4> -->\n                    <div class=\"pa-2\">\n                      <div class=\"text-overline font-weight-bold\">Owner:</div>\n\n                      <a\n                        class=\"no-text-decor link-color\"\n                        :href=\"solScanAccount(owner)\"\n                        target=\"_blank\"\n                      >\n                        <span class=\"account-id\">\n                          {{ displayOwner }}\n                        </span>\n                      </a>\n\n                      <a\n                        v-show=\"!!namingData && namingData.twitter\"\n                        :href=\"twitterLink\"\n                        target=\"_blank\"\n                        class=\"no-text-decor pl-2 account-id\"\n                      >\n                        {{ !!namingData ? `@${namingData.twitter}` : \"\" }}\n                      </a>\n\n                      <v-icon\n                        size=\"18\"\n                        class=\"ml-1\"\n                        @click=\"copyToClipboard(owner)\"\n                      >\n                        mdi-content-copy\n                      </v-icon>\n                    </div>\n\n                    <div class=\"pa-2\">\n                      <div class=\"text-overline font-weight-bold\">Mint:</div>\n                      <a\n                        class=\"no-text-decor link-color\"\n                        :href=\"solScanAccount(mint)\"\n                        target=\"_blank\"\n                      >\n                        <span class=\"account-id\">\n                          {{ mint }}\n                        </span>\n                      </a>\n                      <v-icon\n                        size=\"18\"\n                        class=\"ml-1\"\n                        @click=\"copyToClipboard(mint)\"\n                      >\n                        mdi-content-copy\n                      </v-icon>\n                    </div>\n                    <div class=\"pa-2\">\n                      <div class=\"text-overline font-weight-bold\">\n                        Attributes:\n                      </div>\n\n                      <template v-if=\"!isPlain\">\n                        <v-chip\n                          v-for=\"(attr, i) in attributes\"\n                          :key=\"i\"\n                          outlined\n                          small\n                          class=\"ma-1\"\n                          v-show=\"!!attr.mat\"\n                          :color=\"getColowByMat(attr.mat)\"\n                        >\n                          {{ attr.mat }} {{ attr.type }}\n                        </v-chip>\n                      </template>\n                      <template v-else>\n                        <span class=\"account-id\"> None </span>\n                      </template>\n                    </div>\n                    <div class=\"pa-2\">\n                      <div class=\"text-overline font-weight-bold d-inline-flex\">\n                        Rarity rating:\n                      </div>\n                      <span class=\"pl-1 account-id d-inline-flex\">\n                        {{ rarity }}%\n                      </span>\n\n                      <div\n                        class=\"\n                          text-overline\n                          font-weight-bold\n                          d-inline-flex\n                          ml-12\n                        \"\n                      >\n                        RANK:\n                      </div>\n                      <span class=\"pl-1 account-id d-inline-flex\">\n                        {{ rank }}\n                      </span>\n                    </div>\n                  </v-card-text>\n                </v-card>\n              </template>\n              <template v-else>\n                <v-skeleton-loader\n                  elevation=\"4\"\n                  class=\"mx-auto ma-1\"\n                  type=\"article, list-item-three-line, list-item-three-line, list-item-two-line, card-heading\"\n                ></v-skeleton-loader>\n              </template>\n            </v-col>\n          </v-row>\n        </v-container>\n      </v-card-text>\n    </template>\n    <AppFooter />\n  </v-card>\n</template>\n\n<script>\nimport AppFooter from \"../components/AppFooter.vue\";\nimport TitleParallax from \"../components/TitleParallax.vue\";\nimport { getNFTOwner } from \"../lib/metadata-helper/metadata\";\nimport axios from \"axios\";\nimport { getSolscanUrl, getTwitterUrl, createResourceUrl } from \"../lib/util\";\nimport { decodeSymbolPair, getColowByMaterial } from \"../lib/codex\";\nimport { getAllRegisteredInfo } from \"../lib/name-service\";\nimport { mapState } from \"vuex\";\nimport { RawImg } from \"../lib/data/untouched\";\n\nconst DisplayOwnerLength = 12;\n\nexport default {\n  components: { AppFooter, TitleParallax },\n\n  async activated() {\n    this.err = false;\n    // metadata\n    this.loaded = false;\n    // this.$vuetify.goTo(5, { offset: 25 });\n    // elem may not be rendered & throw undefined error\n    await this.loadPieceData();\n    //TODO: fix this forget scroll of previous page\n    // this.$vuetify.goTo(this.$refs.previewSkeleton || this.$refs.previewImg, {\n    //   offset: 25,\n    // });\n  },\n  watch: {},\n  computed: {\n    ...mapState({\n      abs: (s) => s.abs || [],\n    }),\n    rarity() {\n      return (\n        this.abs.find((a) => a.metadata === this.metadata)?.rarity || 0\n      ).toFixed(2);\n    },\n    rank() {\n      return this.abs.find((a) => a.metadata === this.metadata)?.rank || 0;\n    },\n    imgBase64() {\n      return `data:${this.downloadFileType.contentType};base64,${this.imgData}`;\n    },\n    displayOwner() {\n      if (this.namingData?.domain) return this.namingData.domain;\n      if (!this.namingData?.twitter) return this.owner;\n      // return shorter version if has twitter\n      return `${this.owner.substr(\n        0,\n        DisplayOwnerLength\n      )}... ${this.owner.substr(DisplayOwnerLength * -1, DisplayOwnerLength)}`;\n    },\n    twitterLink() {\n      return getTwitterUrl(this.namingData?.twitter);\n    },\n    downloadFileType() {\n      if (this.symbol[1] === \"A\")\n        return { ext: \".jpeg\", contentType: \"image/jpeg\" };\n      return { ext: \".gif\", contentType: \"image/gif\" };\n    },\n    downloadFilename() {\n      return `${this.name.replace(/\\s/g, \"_\").replace(/\\./g, \"\")}${\n        this.downloadFileType.ext\n      }`;\n    },\n    isPlain() {\n      return this.symbol === \"AA\";\n    },\n    attributes() {\n      return decodeSymbolPair(this.symbol);\n    },\n    rawImgUrl() {\n      if (!this.ercSrc) return \"\";\n      const rawUrl = RawImg.find(\n        (r) =>\n          r.arErc === this.ercSrc.substring(this.ercSrc.lastIndexOf(\"/\") + 1)\n      );\n      if (!rawUrl) return \"\";\n      return createResourceUrl(rawUrl.arImg);\n    },\n  },\n\n  props: {\n    metadata: String,\n  },\n  data() {\n    return {\n      err: false,\n      name: null,\n      ercSrc: null,\n      mint: null,\n      owner: null,\n      erc: null,\n      loaded: false,\n      symbol: null,\n      namingData: null,\n      // rating: 0,\n      imgData: null,\n    };\n  },\n  methods: {\n    async loadImgData() {\n      if (this.err) return;\n      const { data } = await axios.get(this.erc?.image, {\n        responseType: \"arraybuffer\",\n      });\n      this.imgData = Buffer.from(data, \"binary\").toString(\"base64\");\n      // console.log(this.imgData);\n    },\n    async loadPieceData() {\n      await this.loadMeta();\n      await this.loadImgData();\n      await this.reverseLookNaming();\n      this.loaded = true;\n    },\n    solScanAccount(url) {\n      return getSolscanUrl(url);\n    },\n\n    async loadMeta() {\n      try {\n        const { nftOwner, name, uri, mint, symbol } = await getNFTOwner(\n          this.metadata\n        );\n        if (!mint) {\n          // not abs stuff\n          this.err = true;\n          return;\n        }\n        this.owner = this.cleanString(nftOwner);\n        this.name = this.cleanString(name);\n        this.ercSrc = this.cleanString(uri);\n        this.mint = this.cleanString(mint);\n        this.symbol = this.cleanString(symbol);\n        this.erc = (await axios.get(uri)).data;\n        // console.log(ownerData);\n      } catch (e) {\n        console.log(e);\n        this.err = true;\n        // console.log(e);\n      }\n    },\n    cleanString(s) {\n      // eslint-disable-next-line no-control-regex\n      return s.replace(/[\\u0000-\\u001F\\u007F-\\u009F]/g, \"\");\n    },\n    async reverseLookNaming() {\n      if (!this.owner) return;\n      this.namingData = await getAllRegisteredInfo(this.owner);\n    },\n    copyToClipboard(text) {\n      var dummy = document.createElement(\"textarea\");\n      document.body.appendChild(dummy);\n      dummy.value = text;\n      dummy.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(dummy);\n    },\n    getColowByMat(mat) {\n      return getColowByMaterial(mat);\n    },\n  },\n};\n</script>\n<style scoped lang=\"scss\">\n@import \"../scss/global.scss\";\n@import \"../scss/variables.scss\";\n\n.skeleton-img {\n  ::v-deep div {\n    height: 540px !important;\n  }\n}\n.skeleton-img-xs {\n  ::v-deep div {\n    height: 435px !important;\n  }\n}\n.no-word-break {\n  word-break: keep-all;\n}\n.link-color {\n  color: #616161;\n}\n.containerbg {\n  background-image: url(\"/bg/main.jpg\");\n  background-position: top;\n  /* background-size: 100%; */\n  background-size: cover;\n  // max-width: 1900px;\n  // width: 100%;\n  min-height: 650px;\n}\n.account-id {\n  font-size: 0.8rem !important;\n  font-weight: 400 !important;\n  line-height: 1.25rem;\n  letter-spacing: 0.0333333333em !important;\n  font-family: \"Roboto\", sans-serif !important;\n}\n</style>\n"]}]}