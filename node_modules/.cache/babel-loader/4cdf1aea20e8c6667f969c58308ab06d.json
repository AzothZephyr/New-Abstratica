{"remainingRequest":"/Users/aaronh/Downloads/abstratica-web/node_modules/babel-loader/lib/index.js!/Users/aaronh/Downloads/abstratica-web/node_modules/eslint-loader/index.js??ref--14-0!/Users/aaronh/Downloads/abstratica-web/src/lib/wallet/sollet.js","dependencies":[{"path":"/Users/aaronh/Downloads/abstratica-web/src/lib/wallet/sollet.js","mtime":1653334282000},{"path":"/Users/aaronh/Downloads/abstratica-web/babel.config.js","mtime":1653334282000},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/cache-loader/dist/cjs.js","mtime":1693191335836},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/babel-loader/lib/index.js","mtime":1693191336222},{"path":"/Users/aaronh/Downloads/abstratica-web/node_modules/eslint-loader/index.js","mtime":1693191335906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2Fhcm9uaC9Eb3dubG9hZHMvYWJzdHJhdGljYS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvYWFyb25oL0Rvd25sb2Fkcy9hYnN0cmF0aWNhLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMvYWFyb25oL0Rvd25sb2Fkcy9hYnN0cmF0aWNhLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL2Fhcm9uaC9Eb3dubG9hZHMvYWJzdHJhdGljYS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvYWFyb25oL0Rvd25sb2Fkcy9hYnN0cmF0aWNhLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9hYXJvbmgvRG93bmxvYWRzL2Fic3RyYXRpY2Etd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL1VzZXJzL2Fhcm9uaC9Eb3dubG9hZHMvYWJzdHJhdGljYS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1hcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAiZXZlbnRlbWl0dGVyMyI7CmltcG9ydCB7IFB1YmxpY0tleSB9IGZyb20gIkBzb2xhbmEvd2ViMy5qcyI7CmltcG9ydCBiczU4IGZyb20gImJzNTgiOwpleHBvcnQgdmFyIFNvbGxldFVSTCA9ICJodHRwczovL3d3dy5zb2xsZXQuaW8iOwpleHBvcnQgdmFyIFNvbGxldFdhbGxldEFkYXB0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoU29sbGV0V2FsbGV0QWRhcHRlciwgX0V2ZW50RW1pdHRlcik7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU29sbGV0V2FsbGV0QWRhcHRlcik7CgogIGZ1bmN0aW9uIFNvbGxldFdhbGxldEFkYXB0ZXIoX25ldHdvcmssIHByb3ZpZGVyKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNvbGxldFdhbGxldEFkYXB0ZXIpOwoKICAgIHByb3ZpZGVyID0gcHJvdmlkZXIgfHwgU29sbGV0VVJMOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgIF90aGlzLl9uZXR3b3JrID0gX25ldHdvcms7CiAgICBfdGhpcy5fcHVibGljS2V5ID0gbnVsbDsKICAgIF90aGlzLl9wb3B1cCA9IG51bGw7CiAgICBfdGhpcy5faGFuZGxlckFkZGVkID0gZmFsc2U7CiAgICBfdGhpcy5fbmV4dFJlcXVlc3RJZCA9IDE7CiAgICBfdGhpcy5fYXV0b0FwcHJvdmUgPSBmYWxzZTsKICAgIF90aGlzLl9yZXNwb25zZVByb21pc2VzID0gbmV3IE1hcCgpOwoKICAgIF90aGlzLmhhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgX2E7CgogICAgICBpZiAoX3RoaXMuX2luamVjdGVkUHJvdmlkZXIgJiYgZS5zb3VyY2UgPT09IHdpbmRvdyB8fCBlLm9yaWdpbiA9PT0gKChfYSA9IF90aGlzLl9wcm92aWRlclVybCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9yaWdpbikgJiYgZS5zb3VyY2UgPT09IF90aGlzLl9wb3B1cCkgewogICAgICAgIGlmIChlLmRhdGEubWV0aG9kID09PSAiY29ubmVjdGVkIikgewogICAgICAgICAgdmFyIG5ld1B1YmxpY0tleSA9IG5ldyBQdWJsaWNLZXkoZS5kYXRhLnBhcmFtcy5wdWJsaWNLZXkpOwoKICAgICAgICAgIGlmICghX3RoaXMuX3B1YmxpY0tleSB8fCAhX3RoaXMuX3B1YmxpY0tleS5lcXVhbHMobmV3UHVibGljS2V5KSkgewogICAgICAgICAgICBpZiAoX3RoaXMuX3B1YmxpY0tleSAmJiAhX3RoaXMuX3B1YmxpY0tleS5lcXVhbHMobmV3UHVibGljS2V5KSkgewogICAgICAgICAgICAgIF90aGlzLmhhbmRsZURpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuX3B1YmxpY0tleSA9IG5ld1B1YmxpY0tleTsKICAgICAgICAgICAgX3RoaXMuX2F1dG9BcHByb3ZlID0gISFlLmRhdGEucGFyYW1zLmF1dG9BcHByb3ZlOwoKICAgICAgICAgICAgX3RoaXMuZW1pdCgiY29ubmVjdCIsIF90aGlzLl9wdWJsaWNLZXkpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZS5kYXRhLm1ldGhvZCA9PT0gImRpc2Nvbm5lY3RlZCIpIHsKICAgICAgICAgIF90aGlzLmhhbmRsZURpc2Nvbm5lY3QoKTsKICAgICAgICB9IGVsc2UgaWYgKGUuZGF0YS5yZXN1bHQgfHwgZS5kYXRhLmVycm9yKSB7CiAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBfdGhpcy5fcmVzcG9uc2VQcm9taXNlcy5nZXQoZS5kYXRhLmlkKTsKCiAgICAgICAgICBpZiAocHJvbWlzZXMpIHsKICAgICAgICAgICAgdmFyIF9wcm9taXNlcyA9IF9zbGljZWRUb0FycmF5KHByb21pc2VzLCAyKSwKICAgICAgICAgICAgICAgIHJlc29sdmUgPSBfcHJvbWlzZXNbMF0sCiAgICAgICAgICAgICAgICByZWplY3QgPSBfcHJvbWlzZXNbMV07CgogICAgICAgICAgICBpZiAoZS5kYXRhLnJlc3VsdCkgewogICAgICAgICAgICAgIHJlc29sdmUoZS5kYXRhLnJlc3VsdCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlLmRhdGEuZXJyb3IpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBfdGhpcy5fYmVmb3JlVW5sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICB2b2lkIF90aGlzLmRpc2Nvbm5lY3QoKTsKICAgIH07CgogICAgaWYgKGlzSW5qZWN0ZWRQcm92aWRlcihwcm92aWRlcikpIHsKICAgICAgX3RoaXMuX2luamVjdGVkUHJvdmlkZXIgPSBwcm92aWRlcjsKICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcocHJvdmlkZXIpKSB7CiAgICAgIF90aGlzLl9wcm92aWRlclVybCA9IG5ldyBVUkwocHJvdmlkZXIpOwogICAgICBfdGhpcy5fcHJvdmlkZXJVcmwuaGFzaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoewogICAgICAgIG9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAgICAgICBuZXR3b3JrOiBfdGhpcy5fbmV0d29yawogICAgICB9KS50b1N0cmluZygpOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJwcm92aWRlciBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBpbmplY3RlZCBwcm92aWRlciBvciBhIFVSTCBzdHJpbmcuIik7CiAgICB9CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNvbGxldFdhbGxldEFkYXB0ZXIsIFt7CiAgICBrZXk6ICJoYW5kbGVDb25uZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDb25uZWN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfYTsKCiAgICAgIGlmICghdGhpcy5faGFuZGxlckFkZGVkKSB7CiAgICAgICAgdGhpcy5faGFuZGxlckFkZGVkID0gdHJ1ZTsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIHRoaXMuaGFuZGxlTWVzc2FnZSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImJlZm9yZXVubG9hZCIsIHRoaXMuX2JlZm9yZVVubG9hZCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9pbmplY3RlZFByb3ZpZGVyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICB2b2lkIF90aGlzMi5zZW5kUmVxdWVzdCgiY29ubmVjdCIsIHt9KTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cubmFtZSA9ICJwYXJlbnQiOwogICAgICAgIHRoaXMuX3BvcHVwID0gd2luZG93Lm9wZW4oKF9hID0gdGhpcy5fcHJvdmlkZXJVcmwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b1N0cmluZygpLCAiX2JsYW5rIiwgImxvY2F0aW9uLHJlc2l6YWJsZSx3aWR0aD00NjAsaGVpZ2h0PTY3NSIpOwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgX3RoaXMyLm9uY2UoImNvbm5lY3QiLCByZXNvbHZlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZURpc2Nvbm5lY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURpc2Nvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuX2hhbmRsZXJBZGRlZCkgewogICAgICAgIHRoaXMuX2hhbmRsZXJBZGRlZCA9IGZhbHNlOwogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgdGhpcy5oYW5kbGVNZXNzYWdlKTsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIiwgdGhpcy5fYmVmb3JlVW5sb2FkKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3B1YmxpY0tleSkgewogICAgICAgIHRoaXMuX3B1YmxpY0tleSA9IG51bGw7CiAgICAgICAgdGhpcy5lbWl0KCJkaXNjb25uZWN0Iik7CiAgICAgIH0KCiAgICAgIHRoaXMuX3Jlc3BvbnNlUHJvbWlzZXMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZiwgaWQpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAgcmVqZWN0ID0gX3JlZjJbMV07CgogICAgICAgIF90aGlzMy5fcmVzcG9uc2VQcm9taXNlcy5kZWxldGUoaWQpOwoKICAgICAgICByZWplY3QobmV3IEVycm9yKCJXYWxsZXQgZGlzY29ubmVjdGVkIikpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kUmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NlbmRSZXF1ZXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKG1ldGhvZCwgcGFyYW1zKSB7CiAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAgIHZhciByZXF1ZXN0SWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEobWV0aG9kICE9PSAiY29ubmVjdCIgJiYgIXRoaXMuY29ubmVjdGVkKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJXYWxsZXQgbm90IGNvbm5lY3RlZCIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXF1ZXN0SWQgPSB0aGlzLl9uZXh0UmVxdWVzdElkOwogICAgICAgICAgICAgICAgKyt0aGlzLl9uZXh0UmVxdWVzdElkOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7CgogICAgICAgICAgICAgICAgICBfdGhpczQuX3Jlc3BvbnNlUHJvbWlzZXMuc2V0KHJlcXVlc3RJZCwgW3Jlc29sdmUsIHJlamVjdF0pOwoKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNC5faW5qZWN0ZWRQcm92aWRlcikgewogICAgICAgICAgICAgICAgICAgIF90aGlzNC5faW5qZWN0ZWRQcm92aWRlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICBqc29ucnBjOiAiMi4wIiwKICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0SWQsCiAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogT2JqZWN0LmFzc2lnbih7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcms6IF90aGlzNC5fbmV0d29yawogICAgICAgICAgICAgICAgICAgICAgfSwgcGFyYW1zKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIChfYSA9IF90aGlzNC5fcG9wdXApID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICBqc29ucnBjOiAiMi4wIiwKICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0SWQsCiAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgICAgICAgICAgfSwgKF9jID0gKF9iID0gX3RoaXM0Ll9wcm92aWRlclVybCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm9yaWdpbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogIiIpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzNC5hdXRvQXBwcm92ZSkgewogICAgICAgICAgICAgICAgICAgICAgKF9kID0gX3RoaXM0Ll9wb3B1cCkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzZW5kUmVxdWVzdChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9zZW5kUmVxdWVzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2VuZFJlcXVlc3Q7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJwdWJsaWNLZXkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9wdWJsaWNLZXk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29ubmVjdGVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcHVibGljS2V5ICE9PSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImF1dG9BcHByb3ZlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fYXV0b0FwcHJvdmU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29ubmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2Nvbm5lY3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcG9wdXApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wdXAuY2xvc2UoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVDb25uZWN0KCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgICAgICAgcmV0dXJuIF9jb25uZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb25uZWN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZGlzY29ubmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2Rpc2Nvbm5lY3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luamVjdGVkUHJvdmlkZXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdCgiZGlzY29ubmVjdCIsIHt9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BvcHVwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0KCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgICAgcmV0dXJuIF9kaXNjb25uZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkaXNjb25uZWN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2lnbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NpZ24gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGRhdGEsIGRpc3BsYXkpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHNpZ25hdHVyZSwgcHVibGljS2V5OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkRhdGEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBVaW50OEFycmF5Iik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KCJzaWduIiwgewogICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgICBkaXNwbGF5OiBkaXNwbGF5CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIHNpZ25hdHVyZSA9IGJzNTguZGVjb2RlKHJlc3BvbnNlLnNpZ25hdHVyZSk7CiAgICAgICAgICAgICAgICBwdWJsaWNLZXkgPSBuZXcgUHVibGljS2V5KHJlc3BvbnNlLnB1YmxpY0tleSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZSwKICAgICAgICAgICAgICAgICAgcHVibGljS2V5OiBwdWJsaWNLZXkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzaWduKF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9zaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWduOwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2lnblRyYW5zYWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2lnblRyYW5zYWN0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSh0cmFuc2FjdGlvbikgewogICAgICAgIHZhciByZXNwb25zZSwgc2lnbmF0dXJlLCBwdWJsaWNLZXk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KCJzaWduVHJhbnNhY3Rpb24iLCB7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGJzNTguZW5jb2RlKHRyYW5zYWN0aW9uLnNlcmlhbGl6ZU1lc3NhZ2UoKSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgc2lnbmF0dXJlID0gYnM1OC5kZWNvZGUocmVzcG9uc2Uuc2lnbmF0dXJlKTsKICAgICAgICAgICAgICAgIHB1YmxpY0tleSA9IG5ldyBQdWJsaWNLZXkocmVzcG9uc2UucHVibGljS2V5KTsKICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZFNpZ25hdHVyZShwdWJsaWNLZXksIHNpZ25hdHVyZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgdHJhbnNhY3Rpb24pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzaWduVHJhbnNhY3Rpb24oX3g1KSB7CiAgICAgICAgcmV0dXJuIF9zaWduVHJhbnNhY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNpZ25UcmFuc2FjdGlvbjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInNpZ25BbGxUcmFuc2FjdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zaWduQWxsVHJhbnNhY3Rpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNih0cmFuc2FjdGlvbnMpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHNpZ25hdHVyZXMsIHB1YmxpY0tleTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoInNpZ25BbGxUcmFuc2FjdGlvbnMiLCB7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiB0cmFuc2FjdGlvbnMubWFwKGZ1bmN0aW9uICh0eCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBiczU4LmVuY29kZSh0eC5zZXJpYWxpemVNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICBzaWduYXR1cmVzID0gcmVzcG9uc2Uuc2lnbmF0dXJlcy5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJzNTguZGVjb2RlKHMpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBwdWJsaWNLZXkgPSBuZXcgUHVibGljS2V5KHJlc3BvbnNlLnB1YmxpY0tleSk7CiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnMgPSB0cmFuc2FjdGlvbnMubWFwKGZ1bmN0aW9uICh0eCwgaWR4KSB7CiAgICAgICAgICAgICAgICAgIHR4LmFkZFNpZ25hdHVyZShwdWJsaWNLZXksIHNpZ25hdHVyZXNbaWR4XSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0eDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIHRyYW5zYWN0aW9ucyk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNpZ25BbGxUcmFuc2FjdGlvbnMoX3g2KSB7CiAgICAgICAgcmV0dXJuIF9zaWduQWxsVHJhbnNhY3Rpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWduQWxsVHJhbnNhY3Rpb25zOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gU29sbGV0V2FsbGV0QWRhcHRlcjsKfShFdmVudEVtaXR0ZXIpOwoKZnVuY3Rpb24gaXNTdHJpbmcoYSkgewogIHJldHVybiB0eXBlb2YgYSA9PT0gInN0cmluZyI7Cn0KCmZ1bmN0aW9uIGlzSW5qZWN0ZWRQcm92aWRlcihhKSB7CiAgcmV0dXJuIGlzT2JqZWN0KGEpICYmICJwb3N0TWVzc2FnZSIgaW4gYSAmJiB0eXBlb2YgYS5wb3N0TWVzc2FnZSA9PT0gImZ1bmN0aW9uIjsKfQoKZnVuY3Rpb24gaXNPYmplY3QoYSkgewogIHJldHVybiBfdHlwZW9mKGEpID09PSAib2JqZWN0IiAmJiBhICE9PSBudWxsOwp9"},{"version":3,"sources":["/Users/aaronh/Downloads/abstratica-web/src/lib/wallet/sollet.js"],"names":["EventEmitter","PublicKey","bs58","SolletURL","SolletWalletAdapter","_network","provider","_publicKey","_popup","_handlerAdded","_nextRequestId","_autoApprove","_responsePromises","Map","handleMessage","e","_a","_injectedProvider","source","window","origin","_providerUrl","data","method","newPublicKey","params","publicKey","equals","handleDisconnect","autoApprove","emit","result","error","promises","get","id","resolve","reject","Error","_beforeUnload","disconnect","isInjectedProvider","isString","URL","hash","URLSearchParams","location","network","toString","addEventListener","Promise","sendRequest","name","open","once","removeEventListener","forEach","delete","connected","requestId","_b","_c","_d","set","postMessage","jsonrpc","Object","assign","focus","close","handleConnect","display","Uint8Array","response","signature","decode","transaction","message","encode","serializeMessage","addSignature","transactions","messages","map","tx","signatures","s","idx","a","isObject"],"mappings":"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","sourcesContent":["import EventEmitter from \"eventemitter3\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport bs58 from \"bs58\";\nexport const SolletURL = \"https://www.sollet.io\";\nexport class SolletWalletAdapter extends EventEmitter {\n  constructor(_network, provider) {\n    provider = provider || SolletURL;\n    super();\n    this._network = _network;\n    this._publicKey = null;\n    this._popup = null;\n    this._handlerAdded = false;\n    this._nextRequestId = 1;\n    this._autoApprove = false;\n    this._responsePromises = new Map();\n    this.handleMessage = (e) => {\n      var _a;\n      if (\n        (this._injectedProvider && e.source === window) ||\n        (e.origin ===\n          ((_a = this._providerUrl) === null || _a === void 0\n            ? void 0\n            : _a.origin) &&\n          e.source === this._popup)\n      ) {\n        if (e.data.method === \"connected\") {\n          const newPublicKey = new PublicKey(e.data.params.publicKey);\n          if (!this._publicKey || !this._publicKey.equals(newPublicKey)) {\n            if (this._publicKey && !this._publicKey.equals(newPublicKey)) {\n              this.handleDisconnect();\n            }\n            this._publicKey = newPublicKey;\n            this._autoApprove = !!e.data.params.autoApprove;\n            this.emit(\"connect\", this._publicKey);\n          }\n        } else if (e.data.method === \"disconnected\") {\n          this.handleDisconnect();\n        } else if (e.data.result || e.data.error) {\n          const promises = this._responsePromises.get(e.data.id);\n          if (promises) {\n            const [resolve, reject] = promises;\n            if (e.data.result) {\n              resolve(e.data.result);\n            } else {\n              reject(new Error(e.data.error));\n            }\n          }\n        }\n      }\n    };\n    this._beforeUnload = () => {\n      void this.disconnect();\n    };\n    if (isInjectedProvider(provider)) {\n      this._injectedProvider = provider;\n    } else if (isString(provider)) {\n      this._providerUrl = new URL(provider);\n      this._providerUrl.hash = new URLSearchParams({\n        origin: window.location.origin,\n        network: this._network,\n      }).toString();\n    } else {\n      throw new Error(\n        \"provider parameter must be an injected provider or a URL string.\"\n      );\n    }\n  }\n  handleConnect() {\n    var _a;\n    if (!this._handlerAdded) {\n      this._handlerAdded = true;\n      window.addEventListener(\"message\", this.handleMessage);\n      window.addEventListener(\"beforeunload\", this._beforeUnload);\n    }\n    if (this._injectedProvider) {\n      return new Promise((resolve) => {\n        void this.sendRequest(\"connect\", {});\n        resolve();\n      });\n    } else {\n      window.name = \"parent\";\n      this._popup = window.open(\n        (_a = this._providerUrl) === null || _a === void 0\n          ? void 0\n          : _a.toString(),\n        \"_blank\",\n        \"location,resizable,width=460,height=675\"\n      );\n      return new Promise((resolve) => {\n        this.once(\"connect\", resolve);\n      });\n    }\n  }\n  handleDisconnect() {\n    if (this._handlerAdded) {\n      this._handlerAdded = false;\n      window.removeEventListener(\"message\", this.handleMessage);\n      window.removeEventListener(\"beforeunload\", this._beforeUnload);\n    }\n    if (this._publicKey) {\n      this._publicKey = null;\n      this.emit(\"disconnect\");\n    }\n    this._responsePromises.forEach(([, reject], id) => {\n      this._responsePromises.delete(id);\n      reject(new Error(\"Wallet disconnected\"));\n    });\n  }\n  async sendRequest(method, params) {\n    if (method !== \"connect\" && !this.connected) {\n      throw new Error(\"Wallet not connected\");\n    }\n    const requestId = this._nextRequestId;\n    ++this._nextRequestId;\n    return new Promise((resolve, reject) => {\n      var _a, _b, _c, _d;\n      this._responsePromises.set(requestId, [resolve, reject]);\n      if (this._injectedProvider) {\n        this._injectedProvider.postMessage({\n          jsonrpc: \"2.0\",\n          id: requestId,\n          method,\n          params: Object.assign({ network: this._network }, params),\n        });\n      } else {\n        (_a = this._popup) === null || _a === void 0\n          ? void 0\n          : _a.postMessage(\n              {\n                jsonrpc: \"2.0\",\n                id: requestId,\n                method,\n                params,\n              },\n              (_c =\n                (_b = this._providerUrl) === null || _b === void 0\n                  ? void 0\n                  : _b.origin) !== null && _c !== void 0\n                ? _c\n                : \"\"\n            );\n        if (!this.autoApprove) {\n          (_d = this._popup) === null || _d === void 0 ? void 0 : _d.focus();\n        }\n      }\n    });\n  }\n  get publicKey() {\n    return this._publicKey;\n  }\n  get connected() {\n    return this._publicKey !== null;\n  }\n  get autoApprove() {\n    return this._autoApprove;\n  }\n  async connect() {\n    if (this._popup) {\n      this._popup.close();\n    }\n    await this.handleConnect();\n  }\n  async disconnect() {\n    if (this._injectedProvider) {\n      await this.sendRequest(\"disconnect\", {});\n    }\n    if (this._popup) {\n      this._popup.close();\n    }\n    this.handleDisconnect();\n  }\n  async sign(data, display) {\n    if (!(data instanceof Uint8Array)) {\n      throw new Error(\"Data must be an instance of Uint8Array\");\n    }\n    const response = await this.sendRequest(\"sign\", {\n      data,\n      display,\n    });\n    const signature = bs58.decode(response.signature);\n    const publicKey = new PublicKey(response.publicKey);\n    return {\n      signature,\n      publicKey,\n    };\n  }\n  async signTransaction(transaction) {\n    const response = await this.sendRequest(\"signTransaction\", {\n      message: bs58.encode(transaction.serializeMessage()),\n    });\n    const signature = bs58.decode(response.signature);\n    const publicKey = new PublicKey(response.publicKey);\n    transaction.addSignature(publicKey, signature);\n    return transaction;\n  }\n  async signAllTransactions(transactions) {\n    const response = await this.sendRequest(\"signAllTransactions\", {\n      messages: transactions.map((tx) => bs58.encode(tx.serializeMessage())),\n    });\n    const signatures = response.signatures.map((s) => bs58.decode(s));\n    const publicKey = new PublicKey(response.publicKey);\n    transactions = transactions.map((tx, idx) => {\n      tx.addSignature(publicKey, signatures[idx]);\n      return tx;\n    });\n    return transactions;\n  }\n}\nfunction isString(a) {\n  return typeof a === \"string\";\n}\nfunction isInjectedProvider(a) {\n  return (\n    isObject(a) && \"postMessage\" in a && typeof a.postMessage === \"function\"\n  );\n}\nfunction isObject(a) {\n  return typeof a === \"object\" && a !== null;\n}\n"]}]}